RISCV_PREFIX = riscv32-unknown-elf
CC = $(RISCV_PREFIX)-gcc
OBJCOPY = $(RISCV_PREFIX)-objcopy

CFLAGS = -march=rv32i -mabi=ilp32 -O2 -nostdlib -nostartfiles

all: firmware.hex

firmware.elf: firmware.S
	$(CC) $(CFLAGS) -o firmware.elf firmware.S

firmware.hex: firmware.elf
	$(OBJCOPY) -O verilog firmware.elf firmware.hex

clean:
	rm -f firmware.elf firmware.hex
